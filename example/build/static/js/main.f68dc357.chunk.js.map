{"version":3,"sources":["../../dist/index.es.js","index.js"],"names":["classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","_extends","assign","arguments","source","hasOwnProperty","call","inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","possibleConstructorReturn","self","ReferenceError","toConsumableArray","arr","Array","isArray","arr2","from","_React$Component","CheckBox","this","_this","getPrototypeOf","onChange","form","stateValue","state","concat","setState","field","defaultValue","_this2","_props","options","fieldValue","createElement","_ref","text","type","name","checked","Component","multiTypes","settings","setting","dep","satisfy","depValue","e","App","initForm","_ref$defaultValue","undefined","WrapperdComponent","_class2","resetFields","depField","_ref2","_ref2$defaultValue","values","includes","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.f68dc357.chunk.js","sourcesContent":["import React, { Fragment } from 'react';\nimport set from 'lodash/set';\nimport forEach from 'lodash/forEach';\nimport includes from 'lodash/includes';\nimport pull from 'lodash/pull';\nimport map from 'lodash/map';\nimport { includes as includes$1, map as map$1, get, find, isEqual, isFunction } from 'lodash';\n\nvar classCallCheck = function classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar toConsumableArray = function toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\nvar form = function form(settings) {\n  var initForm = {};\n  forEach(settings, function (_ref) {\n    var field = _ref.field,\n        _ref$defaultValue = _ref.defaultValue,\n        defaultValue = _ref$defaultValue === undefined ? null : _ref$defaultValue;\n    set(initForm, field, defaultValue);\n  });\n  return function (WrapperdComponent) {\n    return function (_React$Component) {\n      inherits(_class2, _React$Component);\n\n      function _class2(props) {\n        classCallCheck(this, _class2);\n\n        var _this = possibleConstructorReturn(this, (_class2.__proto__ || Object.getPrototypeOf(_class2)).call(this, props));\n\n        _this.resetFields = function (form, depField, depValue) {\n          forEach(settings, function (_ref2) {\n            var dep = _ref2.dep,\n                field = _ref2.field,\n                _ref2$defaultValue = _ref2.defaultValue,\n                defaultValue = _ref2$defaultValue === undefined ? null : _ref2$defaultValue;\n\n            if (dep && dep.field === depField && dep.value !== depValue) {\n              set(form, field, defaultValue);\n\n              _this.resetFields(form, field, defaultValue);\n            }\n          });\n        };\n\n        _this.onChange = function (field, value) {\n          var form = _this.state.form;\n          set(form, field, value);\n\n          _this.resetFields(form, field, value);\n\n          _this.setState({\n            form: form\n          });\n        };\n\n        _this.state = {\n          form: initForm || {}\n        };\n        return _this;\n      }\n\n      createClass(_class2, [{\n        key: \"render\",\n        value: function render() {\n          var form = {\n            values: this.state.form,\n            onChange: this.onChange\n          };\n          return React.createElement(WrapperdComponent, _extends({}, this.props, {\n            form: form,\n            settings: settings\n          }));\n        }\n      }]);\n      return _class2;\n    }(React.Component);\n  };\n};\n\nvar CheckBox = function (_React$Component) {\n  inherits(CheckBox, _React$Component);\n\n  function CheckBox(props) {\n    classCallCheck(this, CheckBox);\n\n    var _this = possibleConstructorReturn(this, (CheckBox.__proto__ || Object.getPrototypeOf(CheckBox)).call(this, props));\n\n    _this.onChange = function (value) {\n      var onChange = _this.props.form.onChange;\n      var stateValue = _this.state.value;\n\n      if (includes(stateValue, value)) {\n        stateValue = pull(stateValue, value);\n      } else {\n        stateValue = [].concat(toConsumableArray(stateValue), [value]);\n      }\n\n      _this.setState({\n        value: stateValue\n      }, function () {\n        onChange(_this.props.field, _this.state.value);\n      });\n    };\n\n    _this.state = {\n      value: props.value || props.defaultValue || []\n    };\n    return _this;\n  }\n\n  createClass(CheckBox, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          options = _props.options,\n          field = _props.field,\n          fieldValue = _props.value;\n      return React.createElement(Fragment, null, map(options, function (_ref) {\n        var text = _ref.text,\n            value = _ref.value;\n        return React.createElement(\"span\", {\n          key: value\n        }, React.createElement(\"input\", {\n          type: \"checkbox\",\n          name: field,\n          value: value,\n          checked: includes(fieldValue, value),\n          onChange: function onChange() {\n            return _this2.onChange(value);\n          }\n        }), React.createElement(\"span\", null, text));\n      }));\n    }\n  }]);\n  return CheckBox;\n}(React.Component);\n\nvar multiTypes = [\"radio\", \"checkbox\"];\n\nvar Item = function Item(props) {\n  var form = props.form,\n      name = props.key,\n      settings = props.settings;\n  var setting = find(settings, {\n    field: name\n  });\n  var dep = setting.dep,\n      field = setting.field,\n      type = setting.type,\n      options = setting.options;\n\n  if (dep) {\n    var satisfy = false;\n    var depValue = get(form, \"values.\" + dep.field);\n\n    if (isFunction(dep.value)) {\n      satisfy = dep.value(depValue);\n    } else if (isEqual(depValue, dep.value)) {\n      satisfy = true;\n    }\n\n    if (!satisfy) return null;\n  }\n\n  if (includes$1(multiTypes, type)) {\n    var fieldValue = get(form, \"values.\" + field);\n\n    if (type === \"checkbox\") {\n      return React.createElement(CheckBox, _extends({}, props, setting, {\n        value: fieldValue\n      }));\n    }\n\n    return React.createElement(Fragment, null, map$1(options, function (_ref) {\n      var text = _ref.text,\n          value = _ref.value;\n      return React.createElement(\"span\", {\n        key: value\n      }, React.createElement(\"input\", {\n        type: type,\n        name: field,\n        value: value,\n        checked: fieldValue === value,\n        onChange: function onChange(e) {\n          return form.onChange(field, value);\n        }\n      }), React.createElement(\"span\", null, text));\n    }));\n  }\n\n  return React.createElement(\"input\", {\n    type: type,\n    onChange: function onChange(e) {\n      return form.onChange(field, e.target.value);\n    }\n  });\n};\n\nexport { form, Item };","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { includes } from \"lodash\";\nimport { form, Item } from \"react-form-builder\";\n\nfunction Form(props) {\n  return (\n    <div>\n      <Item key=\"history.exist\" {...props} />\n      <Item key=\"history.disease\" {...props} />\n      <br />\n      <Item key=\"history.disease1\" {...props} />\n    </div>\n  );\n}\n\nconst App = form([\n  {\n    field: \"history.exist\",\n    options: [\n      {\n        text: \"无病史\",\n        value: \"false\"\n      },\n      { text: \"有病史\", value: \"true\" }\n    ],\n    type: \"radio\",\n    defaultValue: \"false\"\n  },\n  {\n    field: \"history.disease\",\n    options: [\n      {\n        text: \"足溃疡\",\n        value: \"zukuiyang\"\n      },\n      { text: \"截肢\", value: \"jiezhi\" }\n    ],\n    type: \"checkbox\",\n    dep: { field: \"history.exist\", value: \"true\" }\n  },\n  {\n    field: \"history.disease1\",\n    options: [\n      {\n        text: \"a\",\n        value: \"zukuiyang\"\n      },\n      { text: \"b\", value: \"jiezhi\" }\n    ],\n    type: \"checkbox\",\n    dep: {\n      field: \"history.disease\",\n      value: depValue => includes(depValue, \"jiezhi\")\n    }\n  }\n])(Form);\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n"],"sourceRoot":""}